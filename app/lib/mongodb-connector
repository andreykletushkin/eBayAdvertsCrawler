const { MongoClient } = require('mongodb');
const dotenv = require('dotenv').config();
const client = new MongoClient(process.env.MONGO_DB_URL);

async function insert(advert) {
    client.connect().then(db => {
        var dbo = db.db("mydb")
        dbo.collection("adverts").insertOne(advert, function (err, res) {
            if (err) throw err;
            console.log(err)
            dbo.close();
        });
    });
}

async function find(label) {
    client.connect().then(db => {
        var dbo = db.db("mydb");
        dbo.collection("adverts").find({ label: label }, function (res) {
            console.log(result.label)
        });
    })
}

async function findAll() {
    try {
        await client.connect();
        const dbo = client.db("mydb");
        const advertsDB = dbo.collection("adverts");
        const cursor = advertsDB.find();
        return await cursor.toArray();
    } finally {
        client.close();
    }
}

module.exports.insert = insert;
module.exports.findAll = findAll;





